<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kotappakonda Thodu</title>
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css" rel="stylesheet" />
    <style>
        body { background-color: #121212; color: white; margin: 0; font-family: sans-serif; }
        .spiritual-header { font-size: 1.8rem; font-weight: 800; text-align: center; padding: 20px; color: #FFD700; }
        #map { width: 100%; height: 60vh; border-top: 2px solid #333; }
        .btn { background: #25D366; color: white; width: 90%; margin: 20px auto; padding: 15px; border-radius: 12px; display: block; text-align: center; font-weight: bold; }
    </style>
</head>
<body>
    <div class="spiritual-header">త్రికోటేశ్వరస్వామి దీవెనలతో</div>
    <div id="map"></div>
    <button class="btn" onclick="shareLocation()">SHARE LOCATION</button>

    <script>
        const map = new mlgl.Map({
            container: 'map',
            style: 'https://tiles.openfreemap.org/styles/dark',
            center: [80.035, 16.153],
            zoom: 14
        });

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js');
        }

        function shareLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    const link = `https://wa.me/?text=My%20Location:%20https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                    window.open(link, '_blank');
                });
            }
        }
    </script>
</body>
</html>
